<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>OV Login</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Font awesome + Bulma CSS -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css" integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.min.css">



    <style>
        @import url('https://fonts.googleapis.com/css?family=Inconsolata:400,700');
        @import url('https://fonts.googleapis.com/css?family=Ubuntu:300,400,500');



       * {
            margin: 0px;
            padding: 0px;
        }

        html, body {
            margin: 0;
            height: 100%;
            background-color: #E9E9E7;
        }

        .flex-container {
            display: flex;
            justify-content: center;
        }



        #logo {
            margin-bottom: 0px;
            padding: 0px;
            pointer-events: none;
        }


        #head {
            font-family: 'Inconsolata', monospace;
            color: white;
            font-size: 55px;
            font-weight: bold;
            margin-top: -65px;
            letter-spacing: 1px;
            pointer-events: none;
        }

        #header{
            margin-top:7.5vh;
        }

        span {
            border-right: .05em solid;
            animation: caret 1s steps(1) infinite;
        }

        @keyframes caret {
            50% {
                border-color: transparent;
            }
        }

        #loginForm {
            margin-top: 25px;
        }

        #formStyle {
            font-family: 'Ubuntu', sans-serif;
            color: white;
            padding-left: 15px;
            font-size: 1.25vw;
            margin-bottom: 5px;
            font-weight: 400;
            pointer-events: none;
        }

        #button{
            width: 200px;
            margin-top: 2vh;
            font-family: 'Ubuntu', sans-serif;
            font-weight: 400;

        }


    </style>


</head>

<body>

<form ACTION = "./logged-inPath">

	<p id = "page"> </p>

</form>


<Section id="header">

    <!-- Logo and Typewriter Animation-->

<div id="logo" class="flex-container">

    <image src="OV.png" alt="OV logo"></image>

</div>

</Section>
<form ACTION="./module4Path">

    <!-- Login Section -->

<Section id="loginForm">

    <div class="flex-container">

        <div class="column-container">

        <div class="field">
            <label id="formStyle" class="label">Gebruikersnaam</label>
            <div class="control">
                <input id = "username" class="input is-warning is-rounded is-hovered" type="text" name="user" placeholder="">
            </div>
        </div>

            <div class="field">
            <label id="formStyle" class="label pasInput">Wachtwoord</label>
            <div class="control">
                <input id = "password" class="input is-warning is-rounded is-hovered" type="password" name="token" placeholder="">
            </div>
        </div>
            
  			<div class="flex-container">
                <a id="button" onclick = login() class="button is-white is-rounded is-outlined">Login</a>
            </div>

            <div class="flex-container">
                <a id="button" class="button is-white is-rounded is-outlined">Continue</a>
            </div>


        </div>

    </div>



</Section>
</form>


    <!-- Typewriter Animation -->

<script>
	var username;
	var password;
	
    document.addEventListener('DOMContentLoaded',function(event){
        // array with texts to type in typewriter
        var dataText = ["Payrates","Payrates","Payrates","Payrates","Payrates","Payrates","Payrates","Payrates"
        ,"Payrates","Payrates","Payrates","Payrates","Payrates","Payrates","Payrates","Payrates"];

        // type one text in the typwriter
        // keeps calling itself until the text is finished
        function typeWriter(text, i, fnCallback) {
            // chekc if text isn't finished yet
            if (i < (text.length)) {
                // add next character to h1
                document.querySelector("p").innerHTML = text.substring(0, i+1) +'<span aria-hidden="true"></span>';

                // wait for a while and call this function again for next character
                setTimeout(function() {
                    typeWriter(text, i + 1, fnCallback)
                }, 100);
            }
            // text finished, call callback if there is a callback function
            else if (typeof fnCallback == 'function') {
                // call callback after timeout
                setTimeout(fnCallback, 10000);
            }
        }
        // start a typewriter animation for a text in the dataText array
        function StartTextAnimation(i) {
            if (typeof dataText[i] == 'undefined'){
                setTimeout(function() {
                    StartTextAnimation(0);
                }, 50000);
            }
            // check if dataText[i] exists
            if (i < dataText[i].length) {
                // text exists! start typewriter animation
                typeWriter(dataText[i], 0, function(){
                    // after callback (and whole text has been animated), start next text
                    StartTextAnimation(i + 1);
                });
            }
        }
        // start the text animation
        StartTextAnimation(0);
    });
    
    var xhr = new XMLHttpRequest();
    xhr.onload = function() {
		if (xhr.readyState == 4 && xhr.status == 200) {
			console.log(this.responseText);
			if(this.responseText == 0) {
				// Do some shit here that shows it is a wrong username or password on the page ;p
	    		//document.getElementById("loginForm").innerHTML = "Wrong Username and Password, Please Try Again";
			} else {
				//somehow redirect to the second page
				xhr.open("GET", "./OV/logged-in");
				document.getElementById("loginForm").innerHTML = "second page entered"
				console.log(this.responseText);
			}
		}
	}
	
    // function for when login button button is pressed
    function login() {
    	username = document.getElementById("username").value;
    	password = document.getElementById("password").value;
    	console.log(username);
    	console.log(password);
    	xhr.open("GET", "./OV/login/" + username + "/" + password);
    	xhr.send(this.responseText);
    }
    
</script>




</body>